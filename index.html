<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Cigarette Consumption</title>
    
    <!--Bootstrap Style Sheet and Javascript-->
    <link href="dist/css/bootstrap.css" rel="stylesheet">
	
	
   <!--my personalized style sheet-->
   <link href="style.css" rel="stylesheet">
    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="js/highcharts.js"></script>
    <script src="js/exporting.js"></script>
    <!--Bootstrap Javascript-->
    <script src="js/bootstrap.js"></script>
    <!--For my Map-->
    <script src="js/ammap.js" type="text/javascript"></script>
    <script src="ammap/maps/js/worldLow.js" type="text/javascript"></script>
    
    <script type="text/javascript">
	console.log("page load");
	var DailyCigarette = [];
	var Year2 = [];
	var Age1 = [];
	var Age2 =[];
	var Age3 = [];
	var Age4 = [];
	var Age5 = [];
        
                        var Year = [];
                        var SmokingPercent = [];
                        var CigaretteConsumption = [];
                        var buildHTML;
        
        $(document).ready(function(){
            console.log("doc ready");
			$.ajax({
				type: "GET",
				url: "Total.xml",
				dataType: "xml",
				success: function(xml) {
                                    console.log("xml success");
                                    
                                    $(xml).find('CigaretteConsumption').each(function(){
                                        console.log("found cigs");
                                                
                                                var $CigaretteConsumption = $(this);
						/*$(this).find('CigaretteConsumption').each(function(){*/
                                                Year.push(parseInt($CigaretteConsumption.find('Year').text()))
                                                /*Year.push(parseInt($(this).find('Year').text())*/
                                                SmokingPercent.push(parseInt($CigaretteConsumption.find('SmokingPercent').text()))
                                                
						/*console.log(SmokingPercent);
                                                console.log(Year);*/
						
					/*}); //(this)CigaretteConsumption*/
					}); //CigaretteConsumption
					
					parsexml2();
				} //success function
    
		
		           });//ajax for line graph
                        
          }); //documentready
			function parsexml2(){
			    console.log("parsexml2");
                         $.ajax({
				type: "GET",
				url: "ByAge.xml",
				dataType: "xml",
				success: function(xml) {
                                    console.log("xml success 2");
                                    
                                    $(xml).find('DailyCigarette').each(function(){
                                        console.log("found daily");
				    var $DailyCigarette = $(this);
				    Year2.push(parseInt($DailyCigarette.find('Year2').text()))
				    Age1.push(parseInt($DailyCigarette.find('Age1').text()))
				    Age2.push(parseInt($DailyCigarette.find('Age2').text()))
				    Age3.push(parseInt($DailyCigarette.find('Age3').text()))
				    Age4.push(parseInt($DailyCigarette.find('Age4').text()))
				    Age5.push(parseInt($DailyCigarette.find('Age5').text()))
				    
                                        
                                    });//end dailycigarette
                                    
                                    
                                    writeChart();
                                    
                                }//success2
                                    
		           });//close ajax
                         
			};//closeparsexml
                                    
                                    
    
    
    
function writeChart () {
        
        $('#chart1').highcharts({
            title: {
                text: 'Cigarette Consumption in the U.S.A',
                x: -20 //center
            },
            subtitle: {
                text: 'Mouse over to see percent of adults smoking each year',
                x: -20
            },
            xAxis: {
		tickInterval: 3,
                categories: Year,
                title: {
                    text: 'Year'
                }
            },
            yAxis: {
		min: 0,
		max: 45,
                categories: null,
                title: {
                    text: 'Percent of Adults'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                valueSuffix: '%'
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle',
                borderWidth: 0
            },
            series: [{
                name: 'U.S.A',
                data: SmokingPercent
            }]//ends series
        });//ends chart1
        
        
        $('#chart2').highcharts({
    
            chart: {
                type: 'column'
            },
    
            title: {
                text: 'Percent of Daily Smokers by Age'
            },
    
            xAxis: {
                categories: Year2,
                title: {
                    text: 'Year'
                }
            },
    
            yAxis: {
                allowDecimals: false,
                min: 0,
		max: 21, 
                title: {
                    text: 'Percent who smoke daily'
                }
            },
    
            tooltip: {
                headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                    '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
                footerFormat: '</table>',
                shared: true,
                useHTML: true
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0
                }
            },
    
            series: [{
                name: '12-17 years old',
                data: Age1,
            }, {
                name: '18-25 years old',
                data: Age2,
            }, {
                name: '26-34 years old',
                data: Age3,
            }, {
                name: '35-49 years old',
                data: Age4,
	    },
	       {
		name: '50+ years old',
		data: Age5,
            }]//ends series
        });//ends Chart2
        
}//ends writeChart
                                    
        //For My map
	
	var map;
	
	AmCharts.ready(function() {
			    map = new AmCharts.AmMap();
			    map.pathToImages = "../ammap/images/";
			    //map.panEventsEnabled = true; // this line enables pinch-zooming and dragging on touch devices
			    
			    map.colorSteps = 4;
			    map.balloon.color = "#000000";
			    var dataProvider = {
			        mapVar: AmCharts.maps.worldLow,
			
			        areas: [
			            {
			            id: "AF",
				    title: 'Afghanistan <b> 61</b>',
			            value: 4447100},
			        {
			            id: "AL",
				    title: 'Albania <b> 1116</b>',
			            value: 626932},
			        {
			            id: "DZ",
				    title: 'Algeria 775',
			            value: 5130632},
			        {
			            id: "AR",
				    title: 'Argentina <b> 1042</b>',
			            value: 2673400},
			        {
			            id: "AU",
				    title: 'Australia <b> 1034</b>',
			            value: 33871648},
			        {
			            id: "AZ",
				    title: 'Azerbaijan <b>1877 </b>',
			            value: 4301261},
			        {
			           id: "BY",
				   title: 'Belarus <b>2266 </b>',
			            value: 3405565},
			        {
			            id: "BE",
				    title: 'Belgium <b>1455</b>',
			            value: 783600},
			        {
			            id: "BO",
				    title: 'Bolivia <b>179</b>',
			            value: 15982378},
			        {
			            id: "BR",
				    title: 'Brazil <b>504</b>',
			            value: 8186453},
			        {
			            id: "BG",
				    title: 'Bulgaria <b>2822</b>',
				    value: 1211537},
			        {
			            id: "BW",
				    title: 'Botswana <b>336</b>',
			            value: 1293953},
			        {
			            id: "CA",
				    title: 'Canada <b>809</b>',
			            value: 12419293},
			        {
			            id: "CL",
				    title: 'Chile <b>860</b>',
			            value: 6080485},
			        {
			            id: "CN",
				    title: 'China <b>1711</b>',
			            value: 2926324},
			        {
			            id: "CO",
				    title: 'Colombia <b>412</b>',
			            value: 2688418},
			        {
			            id: "CU",
				    title: 'Cuba <b>1261</b>',
			            value: 4041769},
			        {
			            id: "CZ",
				    title: 'Czech Republic <b>2125</b>',
			            value: 4468976},
			        {
			            id: "DK",
				    title: 'Denmark <b>1413</b>',
			            value: 1274923},
			        {
			            id: "EG",
				    title: 'Egypt <b>1104</b>',
			            value: 5296486},
			        {
			            id: "EE",
				    title: 'Estonia <b>1523</b>',
			            value: 6349097},
			        {
			            id: "FR",
				    title: 'France <b>854</b>',
			            value: 9938444},
			        {
			            id: "DE",
				    title: 'Germany <b>1045</b>',
			            value: 4919479},
			        {
			            id: "GR",
				    title: 'Greece <b>2797</b>',
			            value: 2844658},
			        {
			            id: "GT",
				    title: 'Guatamala <b>235</b>',
			            value: 5595211},
			        {
			            id: "HT",
				    title: 'Haiti <b>100</b>',
			            value: 902195},
			        {
			            id: "HU",
				    title: 'Hungary <b>1518</b>',
			            value: 1711263},
			        {
			            id: "IN",
				    title: 'India <b>96</b>',
			            value: 1998257},
			        {
			            id: "IR",
				    title: 'Iran <b>657</b>',
			            value: 1235786},
			        {
			            id: "IQ",
				    title: 'Iraq <b>864</b>',
			            value: 8414350},
			        {
			            id: "IE",
				    title: 'Ireland <b>1006</b>',
			            value: 1819046},
			        {
			            id: "IT",
				    title: 'Italy <b>1475</b>',
			            value: 18976457},
			        {
			            id: "JP",
				    title: 'Japan <b>1841</b>',
			            value: 8049313},
				{
			            id: "KZ",
				    title: 'Kazakhstan <b>1934</b>',
			            value: 8049313},
				    
			        {
			            id: "LB",
				    title: 'Lebanon <b>2138</b>',
			            value: 642200},
			        {
			            id: "LY",
				    title: 'Libya <b>818</b>',
			            value: 11353140},
			        {
			            id: "MX",
				    title: 'Mexico <b>317</b>',
			            value: 3450654},
				{
			            id: "MN",
				    title: 'Mongolia <b>555</b>',
			            value: 3450654},
				    
			        {
			            id: "MA",
				    title: 'Morocco <b>500</b>',
			            value: 3421399},
			        {
			            id: "NO",
				    title: 'Norway <b>534</b>',
			            value: 12281054},
			        {
			            id: "PK",
				    title: 'Pakistan <b>468</b>',
			            value: 1048319},
			        {
			            id: "PE",
				    title: 'Peru <b>137</b>',
			            value: 4012012},
			        {
			            id: "PL",
				    title: 'Poland <b>1586</b>',
			            value: 754844},
			        {
			            id: "RU",
				    title: 'Russia Federation <b>2786</b>',
			            value: 5689283},
			        {
			            id: "SA",
				     title: 'Saudi Arabia <b>809</b>',
			            value: 20851820},
			        {
			            id: "RS",
				    title: 'Serbia <b>2861</b>',
			            value: 2233169},
			        {
			            id: "SI",
				    title: 'Slovenia <b>2369</b>',
			            value: 608827},
			        {
			            id: "ZA",
				    title: 'South Africa <b>459</b>',
			            value: 7078515},
			        {
			            id: "ES",
				    title: 'Spain <b>1751</b>',
			            value: 5894121},
			        {
			            id: "SE",
				    title: 'Sweden <b>715</b>',
			            value: 1808344},
			        {
			            id: "CH",
				    title: 'Switzerland <b>1722</b>',
			            value: 5363675},
			        {
			            id: "TN",
				    title: 'Tunisia <b>1628</b>',
			            value: 493782},
				{
			            id: "TR",
				    title: 'Turkey <b>1399</b>',
			            value: 493782},
				{
			            id: "UA",
				    title: 'Ukraine <b>2401</b>',
			            value: 493782},
				    
				{
			            id: "GB",
				    title: 'United Kingdom <b>750</b>',
			            value: 493782},
				{
			            id: "US",
				    title: 'United States of America <b>1028</b>',
			            value: 493782},
				{
			            id: "VE",
				    title: 'Venezuela <b>496</b>',
			            value: 493782}]
			    };
			
			    map.areasSettings = {
			        autoZoom: true
			    };
			    map.dataProvider = dataProvider;
			
			    var valueLegend = new AmCharts.ValueLegend();
			    valueLegend.right = 10;
			    valueLegend.minValue = "1-499";
			    valueLegend.maxValue = "2,500+";
			    map.valueLegend = valueLegend;
			
			    map.write("mapdiv");
			});
    
                                    
                                    
    </script> 
    
    
</head>

<body>
    <div class="container">
    <div class="row">
	
	
 

    
<div id="chart1" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
<div id="chart2" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
<div id="mapdiv" style="width: 100%; background-color:#EEEEEE; height: 500px;"></div>










   </div><!--ends the container-->
</body>
</html>
